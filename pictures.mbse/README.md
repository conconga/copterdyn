# copterdyn

**copterdyn** is a sophisticated simulator for a quadcopter modeled using
multibody simulation concepts.

# history

The quadcopter simulator is outdated, and with its first version completed in 2017.
It was developed using Python 2.7, without any compatibility to any Python
3.0. This was critical in particular with debugging information and frame
generation (animations). Additionally, the first implementation had other issues.
For instance, while the simulation of the dynamics impressive, the project lacked a proper propeller model, and a
piloting (controlling) algorithm. Moreover, the interfaces to any guidance inadequate.

# refactoring

As my career banked to systems engineering, I made a decision to reshape the
project with some reasonable increments with the intention of bringing it
reviving the project also for python 3, populating the simulation with the
complete GNC (guidance-navigation-control) and sensing, and enhancing the
clarity at any interface level.

# mbse

The next paragraphs and respective diagrams will provide the details about the new project, and what is
expected to have achieved.

## use case diagram

The System-of-Interest will provide at least three services:

* to simulate any hover maneuver of the quadcopter (configured by the user);
* to simulate sensors as described by a comercial datasheet; GPS data is an input for the navigation, and will be generated by the sensor simulator;
* to calculate any navigation data, position, velocity and acceleration.


![Package_02_UseCases_UseCases.JPG](Package_02_UseCases_UseCases.JPG?raw=true "Use-Case diagram, and details on stakeholders (I myself!) needs.")

## context diagram

The Context-Diagram for the System-of-Interest (SoI) does not depict any
surprises. The SoI interacts with the User at lauching of any simulation, and
provides data to a logger, file, or disply unit.

![Package_01_SystemContext_SoI_Context.JPG](Package_01_SystemContext_SoI_Context.JPG?raw=true "Context Diagram.")

## Activity: Simulate Hover

The UseCase "Simulate Hover" is decomposed into its subfunctions. Here the role
of Guidance and Piloting are represented by the functions "calculate
trajectory" and "calculate control commands". Most of the functions are allowed
to perform in parallel.

This Activity satisfies some requirements:

* to simulate the full kinematics of a quadcopter, also non-simmetrical quadcopter;
* to enable the development of control laws for the plant;
* to enable the development of guidance laws based on configured missions (waypoints, abrupt structural changes (fail))

![Activity_simulate_hover_simulate_hover.JPG](Activity_simulate_hover_simulate_hover.JPG?raw=true "UseCase: simulate hover")

## Activity: Perform Navigation

The UseCase "Perform Navigation" is decomposed into its subfunctions. The main role of the Activity is to allow the development
of navigation algorithms fusing any source available. For instance, some possible sources supporting the navigation algorithms are:

* gyrometer measurements;
* accelerometer measurements;
* GPS or similar data;
* altitude.

The modularity enables the evaluation of different concepts, like
gyroless-navigation, or navigation supported by static reference points
measured by radars or cameras, for instance.

![Activity_perform_navigation_perform_navigation.JPG](Activity_perform_navigation_perform_navigation.JPG?raw=true "UseCase: perform navigation")

## Activity: Simulate Sensors

The UseCase "Simulate Sensors" is decomposed into its subfunctions. The main
goal of this activity is to convert the state vector describing the dynamic
system into sensor measurements, if any sensors are installed on the system.
For example, a classical sensor set (CSS) for navigation consists of 3 gyros, 3
accelerometers, and GPS. Several assumptions have to be make, for instance:

* the CSS is not installed exactly at the center of gravity of the quadcopter;
* the GPS data is delayed with regard to the actual dynamics;
* the sensors are not ideal, and provide noise measurements.

Due to the modularity of this model, the sensor simulation might be replaced
(or simply configured) to include magnetic sensors, radars, cameras, and
whatever is necessary for your (my) application.

The output of this activity is designed to be the input of the navigation.

![Activity_simulate_sensors_simulate_sensors.JPG](Activity_simulate_sensors_simulate_sensors.JPG?raw=true "UseCase: simulate navigation")

